<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-firestore.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
           https://firebase.google.com/docs/web/setup#available-libraries -->

    <script>
        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyCuqXvrC20supCgCk2qdXMV5k0qwiNzCro",
            authDomain: "abbyfb1.firebaseapp.com",
            databaseURL: "https://abbyfb1.firebaseio.com",
            projectId: "abbyfb1",
            storageBucket: "abbyfb1.appspot.com",
            messagingSenderId: "868023743677",
            appId: "1:868023743677:web:cfb2d64ccb6ef557a133d4"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
    </script>
</head>

<body>
    <form id="inputForm" onsubmit="handleSubmit(event)">
        <input type="text" placeholder="enter task" id="itemInput" />
        <input type="submit" value="add" id="submitbutton" />
    </form>

    <div id=root>




        <script>
            const DB = firebase.firestore();
            function handleSubmit(e) {
                e.preventDefault();
                let task = document.getElementById('itemInput').value;
                DB.collection('ToDo').add({ task: task, done: false })
                    .then(() => { console.log('task recorded') })
                    .catch(err => { console.error(err) })
                document.getElementById('root').innerHTML += `<div class="taskAdd"><div id="taskDisplay">${task}</div><form onsubmit="submitDone(event)"><input type="submit" id="buttonDone" value="done"/></form><form onsubmit="submitDelete(event)"><input type="submit" class="buttonDelete" value="delete"/></form></div>`
                //document.getElementById('root').innerHTML += `<div id="taskAdd"><div id="taskDisplay">${task}</div><button class="buttonDone">done</button><button class="deleteButton">delete</button></div>`
            }
            function submitDelete(e) {
                e.preventDefault();
                console.log("delete");
                document.getElementsByClassName('taskAdd').innerHTML = ""

            }
         function submitDone(e) {
                e.preventDefault();
                console.log("done")
                document.getElementById('taskDisplay').style.color = "green";
                document.getElementById("buttonDone").placeholder = "undone";
            } 
        /* const doneButtons = document.querySelectorAll('.buttonDone');
                    doneButtons.forEach(button => {
                        button.addEventListener('click', e => {
                            const doneButtons = e.target;
                            console.log("done")
                            doneButtons.style.color = "green";
                            document.getElementById('taskDisplay').color = "grey";
                        })
                    }) */
        </script>


</body>

</html>