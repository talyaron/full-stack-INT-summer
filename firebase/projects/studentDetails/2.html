<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
     <!-- The core Firebase JS SDK is always required and must be listed first -->
     <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-app.js"></script>
     <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-firestore.js"></script>
 
     <!-- TODO: Add SDKs for Firebase products that you want to use
      https://firebase.google.com/docs/web/setup#available-libraries -->
     <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-analytics.js"></script>
 
     <script>
         // Your web app's Firebase configuration
         // For Firebase JS SDK v7.20.0 and later, measurementId is optional
         var firebaseConfig = {
             apiKey: "AIzaSyApKfJlQF__9ljbFsHTERGBWbMuCjg64aE",
             authDomain: "jamie-fb1.firebaseapp.com",
             databaseURL: "https://jamie-fb1.firebaseio.com",
             projectId: "jamie-fb1",
             storageBucket: "jamie-fb1.appspot.com",
             messagingSenderId: "708555761524",
             appId: "1:708555761524:web:301a483e563160741a6e21",
             measurementId: "G-69YHWZ6S08"
         };
         // Initialize Firebase
         firebase.initializeApp(firebaseConfig);
         firebase.analytics();
         const DB=firebase.firestore();
     </script>
</head>
<body>
    <h1> find a student</h1>
    <form id = "hi">
        <p> Name of student: <input id="nameSearched" type="text"/></p>
        <input type= "submit" value="Find Student"/>
    </form>
    <div id="StudentInfo">

    </div>
    <script>
        const form=document.getElementById('hi');
        form.addEventListener('submit', e=>{
            e.preventDefault();
            let nameSearched=document.getElementById('nameSearched').value;
            findName(nameSearched);
        })

        function findName(ns){
            let age="";
            let name="";
            let city="";
            DB.collection('students').onSnapshot(studentsDB=>{
                studentsDB.forEach(studentDB=>{
                    let test=studentDB.data().name;
                    if(test==ns){
                        age=studentDB.data().age;
                        city=studentDB.data().city;
                        name=test;
                    }
                    console.log(name,age,city);
                })
                document.getElementById('StudentInfo').innerHTML=writeInfo(name,age,city);
            })
        }

        function writeInfo(name, age, city){
            return `<div class="info"><p>${name}'s info:</p><p>Age: ${age}</p><p>City: ${city}</p></div>`
        }
    </script>
</body>
</html>