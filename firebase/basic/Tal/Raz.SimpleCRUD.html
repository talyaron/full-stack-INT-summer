<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-firestore.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
      https://firebase.google.com/docs/web/setup#available-libraries -->

    <script>
      // Your web app's Firebase configuration
      var firebaseConfig = {
        apiKey: "AIzaSyB5GKCs1yMzuxICTHXId5DptNZA1aGQHTY",
        authDomain: "tal-fb1.firebaseapp.com",
        databaseURL: "https://tal-fb1.firebaseio.com",
        projectId: "tal-fb1",
        storageBucket: "tal-fb1.appspot.com",
        messagingSenderId: "823131005125",
        appId: "1:823131005125:web:00b0c01f14f3922b3410ac",
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      const DB = firebase.firestore();
    </script>
  </head>
  <body>
    <script>
      //write your name to the DB
      DB.collection("users")
        .doc("Raz")
        .set({ name: "Raz", city: "long island" })
        .then(() => {
          console.log("saved correctly");
        })
        .catch((err) => {
          console.error(err);
        });
      //message
      DB.collection("chat")
        .add({
          message: "Hello Raz",
          sender: "Raz",
          time: new Date().getTime(),
        })
        .then(() => {
          consolle.log("message was saved");
        })
        .catch((err) => {
          console.error(err);
        });
      function listenToMessages() {
        try {
          //read messages
          
          DB.collection('chat')
                .limit(2)
                .onSnapshot(messagesDB => {
                    console.log(messagesDB.size)

                    messagesDB.forEach(messageDB => {
                        console.log(messageDB.data())
                    })
        }
      }
      //listenToMessages();
      //create a div with a message    
      function writeTheMessage(Message)
         return `<div class='message'><p>${message.message}</p><div>${message.sender}</div></div>`
    </script>
  </body>
</html>
